<p class="font-sans text-sm mb-2">Géowatt / Nucléaire</p>

<div class="flex gap-2 items-center mb-4">
    <img class="w-12 h-12" src="http://localhost:5173/sprite/atom.png">
    <h2 class="text-lg font-bold uppercase">{{ plant.name }}</h2>
</div>

<h3 class="font-bold text-l mt-4">Informations générales</h3>
<p>Mode de production : {{ plant.production_mode }}</p>
<p>Puissance installée : {{ plant.output }}</p>

{% if plant.wikipedia %}
<p><a href="{{ plant.wikipedia_url }}" target="_blank" class="underline">Voir sur Wikipédia</a></p>
{% endif %}

{% if plant.wikidata %}
<p><a href="{{ plant.wikidata_url }}" target="_blank" class="underline">Voir sur Wikidata</a></p>
{% endif %}

{% if plant.eic_list %}
<!-- <p>Codes EIC
    <ul>
        {% for code in plant.eic_list %}
        <li>{{ code }}</li>
        {% endfor %}
    </ul>
</p> -->

<h3 class="font-bold text-l mt-4">Tranches</h3>
<ul>
    {% for capacity in capacities %}
    <li>{{ capacity.name }} - {{ capacity.output }} MW</li>
    {% endfor %}
</ul>

<h3 class="font-bold text-l mt-4">Production</h3>
<canvas id="production-graph"></canvas>
<!-- <ul>
    {% for prod in production %}
    <li>{{ prod.name }} - {{ prod.values }} MW</li>
    {% endfor %}
</ul> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.js"
    integrity="sha512-6HrPqAvK+lZElIZ4mZ64fyxIBTsaX5zAFZg2V/2WT+iKPrFzTzvx6QAsLW2OaLwobhMYBog/+bvmIEEGXi0p1w=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    var labels = ['00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00', '07:00',
    ];

    new Chart(
        document.getElementById('production-graph'),
        {
            type: 'line',
            data: {
                labels,
                datasets: [
                    {
                        label: 'ST LAURENT 1',
                        data: [1287.5, 1287, 1288, 1287.5, 1288, 1288, 1288.5, 1289],
                        fill: 'stack',
                    },
                    {
                        label: 'ST LAURENT 2',
                        data: [1281, 1281, 1282, 1281, 1281, 1281, 1282, 1282],
                        fill: 'stack',
                    }
                ]
            },
            options: {
                scales: {
                    y: {
                        stacked: true,
                        beginAtZero: true,
                        ticks: {
                            callback: val => `${val} MW`,
                        }
                    }
                }
            }
        }
    );
</script>
{% endif %}